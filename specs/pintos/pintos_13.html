<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html40/loose.dtd">
<HTML>
<!-- Created on January, 14 2016 by texi2html 1.66 -->
<!--
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people <dev@texi2html.cvshome.org>
Send bugs and suggestions to <users@texi2html.cvshome.org>

-->
<HEAD>
<TITLE>Pintos Projects: Development Tools</TITLE>

<META NAME="description" CONTENT="Pintos Projects: Development Tools">
<META NAME="keywords" CONTENT="Pintos Projects: Development Tools">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.66">
<LINK REL="stylesheet" HREF="pintos.css">
</HEAD>

<BODY >

<A NAME="SEC197"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="pintos_12.html#SEC184"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="pintos_14.html#SEC207"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="pintos.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="pintos.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="pintos_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>

<HR SIZE=2>
<H1> F. Development Tools </H1>
<!--docid::SEC197::-->
<P>

Here are some tools that you might find useful while developing code.
</P>
<P>

<A NAME="Tags"></A>
<HR SIZE="6">
<A NAME="SEC198"></A>
<H2> F.1 Tags </H2>
<!--docid::SEC198::-->
<P>

Tags are an index to the functions and global variables declared in a
program.  Many editors, including Emacs and <CODE>vi</CODE>, can use
them.  The <Q><TT>Makefile</TT></Q> in <Q><TT>pintos/src</TT></Q> produces Emacs-style
tags with the command <CODE>make TAGS</CODE> or <CODE>vi</CODE>-style tags with
<CODE>make tags</CODE>.
</P>
<P>

In Emacs, use <KBD>M-.</KBD> to follow a tag in the current window,
<KBD>C-x 4 .</KBD> in a new window, or <KBD>C-x 5 .</KBD> in a new frame.  If
your cursor is on a symbol name for any of those commands, it becomes
the default target.  If a tag name has multiple definitions, <KBD>M-0
M-.</KBD> jumps to the next one.  To jump back to where you were before
you followed the last tag, use <KBD>M-*</KBD>.
</P>
<P>

<A NAME="cscope"></A>
<HR SIZE="6">
<A NAME="SEC199"></A>
<H2> F.2 cscope </H2>
<!--docid::SEC199::-->
<P>

The <CODE>cscope</CODE> program also provides an index to functions and
variables declared in a program.  It has some features that tag
facilities lack.  Most notably, it can find all the points in a
program at which a given function is called.
</P>
<P>

The <Q><TT>Makefile</TT></Q> in <Q><TT>pintos/src</TT></Q> produces <CODE>cscope</CODE>
indexes when it is invoked as <CODE>make cscope</CODE>.  Once the index has
been generated, run <CODE>cscope</CODE> from a shell command line; no
command-line arguments are normally necessary.  Then use the arrow
keys to choose one of the search criteria listed near the bottom of
the terminal, type in an identifier, and hit <KBD>Enter</KBD>.
<CODE>cscope</CODE> will then display the matches in the upper part of
the terminal.  You may use the arrow keys to choose a particular
match; if you then hit <KBD>Enter</KBD>, <CODE>cscope</CODE> will invoke the
default system editor<A NAME="DOCF9" HREF="pintos_fot.html#FOOT9">(9)</A> and position the
cursor on that match.  To start a new search, type <KBD>Tab</KBD>.  To exit
<CODE>cscope</CODE>, type <KBD>Ctrl-d</KBD>.
</P>
<P>

Emacs and some versions of <CODE>vi</CODE> have their own interfaces to
<CODE>cscope</CODE>.  For information on how to use these interface,
visit <A HREF="http://cscope.sourceforge.net, the &lt;CODE&gt;cscope&lt;/CODE&gt; home
page">http://cscope.sourceforge.net, the <CODE>cscope</CODE> home
page</A>.
</P>
<P>

<A NAME="Version Control"></A>
<HR SIZE="6">
<A NAME="SEC200"></A>
<H2> F.3 Version Control </H2>
<!--docid::SEC200::-->
<P>

<A NAME="Setting Up Git"></A>
<HR SIZE="6">
<A NAME="SEC201"></A>
<H3> F.3.1 Setting Up Git </H3>
<!--docid::SEC201::-->
<P>

The Pintos codebase is rather substantial, and you will be working in teams
to develop some complex features on the project.  In situations like this,
a version control system is absolutely essential so that you can coordinate
your interactions with the codebase, and so you can record checkpoints of
your work as you go.  Additionally, you will submit your work using the
version-control system so that we can retrieve and grade what you have done.
</P>
<P>

We will be using the Git distributed version control system for
CS124.  You can install Git onto your local machine from the
following website:  <A HREF="http://git-scm.com/">http://git-scm.com/</A>.  (It is already installed on the
CMS cluster if you decide to work there.)  There are installers for all
major operating systems.  Once Git is installed, you can follow the
instructions below to get started on Pintos.
</P>
<P>

Each team is given a blank Git repository on the CMS cluster (a.k.a. &quot;the CS
cluster&quot;) to work with.  If your team has not received information about your
Git repository, email Donnie and he will create one for you and send you the
connection details.  This is the repository where your work must be submitted.
</P>
<P>

<STRONG>A CMS cluster account is required to access the Git repositories on the
CMS cluster!</STRONG>  If you don't have an account, or your account is suspended etc.,
you need to get this resolved ASAP.  Ask Donnie if you have any questions about
this.
</P>
<P>

<OL>

<LI>Once you have installed Git on your computer, configure it with your
      user information.  The double-quotes in these commands are necessary if
      you have spaces in the values you specify.
<P>

      <CODE>git config --global user.name &quot;Your Name&quot;</CODE>
</P>
<P>

      <CODE>git config --global user.email &quot;your@email.tld&quot;</CODE>
</P>
<P>

      You will probably also find it helpful to turn on colorful output:
</P>
<P>

      <CODE>git config --global color.ui true</CODE>
</P>
<P>

</P>
<LI>Your team's repository will initially be empty, so for you to be able to
      do any work on Pintos you must retrieve the codebase and add it to your
      repository.  The starting code is stored in another Git repository so
      that if there are any bugfixes that must be passed along, you can easily
      retrieve them.  To get the code from this repository, <STRONG>one</STRONG> team
      member should do the following:
<P>

<UL>

<LI>Clone your team's empty repository to a local computer:
<P>

            <CODE>git clone <VAR>username</VAR>@login.cms.caltech.edu:/cs/courses/cs124/teams/<VAR>teamname</VAR></CODE>
</P>
<P>

            Since the repository is initially empty, this won't be very
            exciting yet.
</P>
<P>

</P>
<LI>Execute the following command to retrieve the Pintos codebase into
            your local clone of the team's repository:
<P>

            <CODE>git pull <VAR>username</VAR>@login.cms.caltech.edu:/cs/courses/cs124/pintos-cit master</CODE>
</P>
<P>

</P>
<LI>Push the Pintos code back up to the team repository with this
            command:
<P>

            <CODE>git push --all</CODE>
</P>
<P>

            (The <CODE>--all</CODE> argument is necessary for the first push,
            since the team repository is empty.  It will be unnecessary once
            the repository is initialized.)
</P>
<P>

</UL>
<P>

      When changes are made to the Pintos sources in the future, one teammate
      can again perform the above procedure, with the following differences:
</P>
<P>

<UL>
<LI>Obviously the team repository won't be empty at that point.
<LI>The <CODE>git push</CODE> command will not require the <CODE>--all</CODE>
            argument.
</UL>
<P>

</P>
<LI>Now that the team repository is set up, team members will need to
      figure out a location to work.  You can work on your local computer,
      on the CMS cluster, or wherever you feel comfortable doing so.
      I usually work within a <Q><TT>projects/pintos</TT></Q> directory on my laptop,
      but perhaps you will want to create a <Q><TT>CS124</TT></Q>
      directory for yourself to work in.
<P>

</P>
<LI>Once you have a location figured out, clone your team's repository to
      that location.  You will actually be making a complete local copy of the
      team repository (which Git calls &quot;origin&quot;) for yourself to work against.
      You will be able to make whatever changes you want to this repository
      without affecting the team repository until you are ready to do so.
<P>

      <CODE>git clone <VAR>username</VAR>@login.cms.caltech.edu:/cs/courses/cs124/teams/<VAR>teamname</VAR></CODE>
</P>
<P>

      Once you have done this, you can run &quot;<CODE>git remote -v</CODE>&quot; to see
      that this repository is now nicknamed &quot;origin&quot;, as stated earlier.
</P>
<P>

</OL>
<P>

<A NAME="Git Repository Details"></A>
<HR SIZE="6">
<A NAME="SEC202"></A>
<H3> F.3.2 Git Repository Details </H3>
<!--docid::SEC202::-->
<P>

You should be aware that your local repository actually contains two
components in one.  First, you will see directories and files like <Q><TT>src</TT></Q>,
etc.  (For the first two projects, you will only have a <Q><TT>src</TT></Q> directory,
but other directories will be added as the course progresses.)  These are
actually not part of the Git repository itself; they are a working copy that
you can edit separately.  If you decide you don't like the changes you have
made in your working copy, you can always revert back to the repository
version with no problems.
</P>
<P>

When you are completely satisfied with your changes, then you can commit these
changes to your own local repository.  The repository itself is stored in a
subdirectory named <Q><TT>.git</TT></Q>, which you can see if you type
&quot;<CODE>ls -al</CODE>&quot;.  (Feel free to look in this directory, but don't muck
with anything in there unless you absolutely know what you are doing.)
</P>
<P>

<A NAME="Using Git for Local Edits"></A>
<HR SIZE="6">
<A NAME="SEC203"></A>
<H3> F.3.3 Using Git for Local Edits </H3>
<!--docid::SEC203::-->
<P>

As you work on your projects, you may want to commit your changes as you get
various parts of the project working.  In fact, you are encouraged to do this!
Nothing is more frustrating than completing a complicated feature, and then
immediately mangling it as you start working on the next task.  <STRONG>Commit
your work every time you complete anything that you don't feel like doing
again.</STRONG>  At any point in your work, you can run the command
&quot;<CODE>git status</CODE>&quot; to see what files have been modified in your working
directory.
</P>
<P>

The command you use to commit changes to your local repository is
&quot;<CODE>git commit</CODE>&quot;.  However, it is important to understand Git's
workflow for committing changes to the repository.  Changes you make in your
working directory will not immediately be included when you commit to your
repository; rather, Git maintains a &quot;staging area&quot; of changes that will be
included in the next commit.  In other words, you can make some changes that
will be included in the commit, and other changes that will not be included
in the commit.  A file whose changes will be included in the next commit is
described as being &quot;staged&quot; (i.e. its changes are included in the staging
area).  A file whose changes will not be included in the next commit is
&quot;unstaged,&quot; or &quot;modified but not staged.&quot;
</P>
<P>

To complicate this somewhat, files also fall into two categories:  &quot;tracked&quot;
files, which have been added to the repository and Git is managing them; and
&quot;untracked&quot; files, which have not yet been added to the repository.
</P>
<P>

The upshot of all this is that if you want to add a new file to your
repository, or you want to include changes of an existing file into your
repository, you must run &quot;<CODE>git add filename</CODE>&quot; to include the file
in the staging area.  Then, these changes will be included in the next commit.
There is a simplification for when you haven't added any new files:  you can
run &quot;<CODE>git commit -a</CODE>&quot;, which will perform the staging step as well as
the commit step.  However, if you create a brand new file, you still need to
run &quot;<CODE>git add filename</CODE>&quot; on that new file before it will be committed.
</P>
<P>

<A NAME="Sharing Work with Your Team"></A>
<HR SIZE="6">
<A NAME="SEC204"></A>
<H3> F.3.4 Sharing Work with Your Team </H3>
<!--docid::SEC204::-->
<P>

When you are ready to share your local work with the rest of your team, you can
run this command to push all of your changes back to the team's Git repository:
</P>
<P>

<CODE>git push</CODE>
</P>
<P>

That's really all it takes!  Of course, the rest of the team must then pull
your changes into their local repositories by running &quot;<CODE>git pull</CODE>&quot;.
This will bring all changes in the team repository down to the local
repository.
</P>
<P>

There are two important rules that you must always follow:
</P>
<P>

<UL>

<LI><STRONG>Never break the code in the team repository, unless you have
      first coordinated your changes with the rest of your team!</STRONG>  It is
      extremely frustrating to pull changes from the team's repository and then
      discover that it broke everything, and now you can't make any progress!
<P>

      The corrolary is that if you are going to break the code in the team
      repository, make sure your team knows first.  That way they can avoid
      pulling the changes if they are in the middle of other work.
</P>
<P>

</P>
<LI><STRONG>Make sure to pull changes from your team repository frequently!</STRONG>
      It may be tempting to avoid retrieving changes from the team repository
      so that you can work uninterrupted, but if you do this then your local
      repository will become more and more different from the team repository,
      and it will become more and more painful to get back in sync.  However,
      if you synchronize with the team repository frequently, the pain of
      keeping in sync will be minimized.
<P>

</UL>
<P>

<A NAME="Submitting Assignments"></A>
<HR SIZE="6">
<A NAME="SEC205"></A>
<H3> F.3.5 Submitting Assignments </H3>
<!--docid::SEC205::-->
<P>

When your team has completed a project to the team's satisfaction, these are
the steps to submit it for grading:
</P>
<P>

<OL>

<LI>Make sure that all changes for the project are pushed to the team
      repository.  Also, make sure that you have completed your design
      document, and that it is in your repository at the specified location.
<P>

</P>
<LI>Create a tag to identify your submission.  One team meber should execute
      this command:  &quot;<CODE>git tag project<VAR>n</VAR>-<VAR>version</VAR></CODE>&quot;
<P>

      For example, after completing the command shell, one teammate could do
      the following:
</P>
<P>

      <CODE>git tag project1-1</CODE>
</P>
<P>

      This tag will only be in the local repository, so once it is tagged,
      the tag also needs to be pushed to the team repository:
</P>
<P>

      <CODE>git push --tags</CODE>
</P>
<P>

      If you discover a bug in your work and you want to fix it, feel free to
      do so and then retag your work, but increment the version, e.g.
      &quot;<CODE>project1-2</CODE>&quot;.  If you try to reuse the same tag you will run
      into some trouble with Git, so make sure each tag is unique.
</P>
<P>

      Also, if multiple teammates create the same tag name on different
      commits in their local repositories, and then try to push them to the
      team repository, this will cause some serious problems.
</P>
<P>

</P>
<LI>Finally, one teammate should submit the team's design document on Moodle.
      (Again, if you discover bugs and want to fix them, just resubmit a new
      design document with the new commit hash-value.)
<P>

</OL>
<P>

<A NAME="Virtual Machine"></A>
<HR SIZE="6">
<A NAME="SEC206"></A>
<H2> F.4 Virtual Machine </H2>
<!--docid::SEC206::-->
<P>

To ensure uniformity of development platforms, it is strongly recommended
that students develop Pintos on a 32-bit Linux platform.  For students
that don't have access to such a platform, a virtual machine image will
be provided for use with Oracle Virtual Box.  Virtual Box is freely
available at <A HREF="http://www.virtualbox.org">http://www.virtualbox.org</A>.
</P>
<P>

More details will be coming soon...
</P>
<P>

<A NAME="Installing Pintos"></A>
<HR SIZE="6">
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="pintos_13.html#SEC197"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="pintos_14.html#SEC207"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="pintos.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="pintos.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="pintos_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>
<FONT SIZE="-1">
This document was generated
by <I>Donnie Pinkston</I> on <I>January, 14 2016</I>
using <A HREF="http://texi2html.cvshome.org"><I>texi2html</I></A>
</FONT>

</BODY>
</HTML>

<!-- Localized -->